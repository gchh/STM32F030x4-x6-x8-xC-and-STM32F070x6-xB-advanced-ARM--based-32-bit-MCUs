#Basic timer(TIM6/TIM7)  
本节适用于STM32F030x8，STM32F070xB和STM32F030xC设备。TIM7只在STM32F070xB和STM32F030xC中有。  
##TIM6/TIM7简介  
基本定时器TIM6包含一个有可编程预分频器驱动的16位自动重载计数器。TIM7也同样。  
##TIM6/TIM7主要特性  
- 16位自动重装载向上计数器  
- 16位可编程预分频器（可实时修改），可以按1到65535之间任意数值分频时钟频率  
- 发生更新事件（计数器溢出）时产生中断/DMA请求  
![](https://i.imgur.com/LDR9DNZ.png)  
##TIM6/TIM7功能描述  
###时基单元  
定时器的主要模式是一个带自动重装载的16位向上计数器。计数器时钟由预分频器提供。  
计数器，自动重载寄存器和预分频器可以由软件进行读写，甚至在它们运行中。  
时基单元包括：  
- 计数器寄存器TIMx_CNT  
- 预分频器寄存器TIMx_PSC  
- 自动重载寄存器TIMx_ARR  
自动重载寄存器是预装载的。每次读写自动重载寄存器实际是访问预装载寄存器。预装载寄存器的值是立即写入影子寄存器，还是在发生更新事件UEV时才写入，取决于TIMx_CR1中的自动重载预装载使能位ARPE。如果TIMx_CR1中的UDIS=0，则当计数器计数达到溢出值时，就会发生更新事件。更新事件也可以由软件设置产生。  
计数器的时钟是预分频器输出的CK_CNT，只有当TIMx_CR1中的计数器使能位CEN=1时，时钟才被使能。  
注意，实际的计数器使能信号CNT_EN在CEN被置1一个时钟周期后才被置1。  
####预分频器描述  
预分频器可以将时钟频率在1到65535之间任意分频，然后提供给计数器。它是基于16位计数器通过16位寄存器（在TIMx_PSC中）控制的。它可以被实时修改，因为它带有缓冲。修改后的新分频值在发生更新事件时写入影子寄存器，开始使用。  
图135和136显示了当实时改变分频率时计数器的行为。  
![](https://i.imgur.com/1Erp0fw.png)  
![](https://i.imgur.com/l4U5jrO.png)  
###计数模式  
